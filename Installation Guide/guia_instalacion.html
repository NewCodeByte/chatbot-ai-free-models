<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guía de Instalación - Chatbot AI Free Models</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
            color: #333; /* Color de texto base oscuro */
        }
        .container {
            max-width: 900px;
            margin: 30px auto;
            padding: 25px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1, h2, h3 {
            color: #007bff; /* Azul primario */
            margin-top: 1.5em;
            margin-bottom: 0.8em;
        }
        h1 {
            text-align: center;
            border-bottom: 2px solid #eee;
            padding-bottom: 0.5em;
            font-size: 2.2em;
        }
        h2 {
            border-bottom: 1px solid #eee;
            padding-bottom: 0.3em;
            font-size: 1.8em;
        }
        h3 {
            font-size: 1.4em;
            color: #17a2b8; /* Azul verdoso para subtítulos */
        }
        p, li {
            font-size: 1em;
            margin-bottom: 0.7em;
        }
        ul, ol {
            padding-left: 25px;
        }
        /* --- CSS CORRECTO PARA CODE Y PRE --- */
        code {
            background-color: #e9ecef; /* Fondo gris claro */
            padding: 3px 6px; /* Un poco más de padding */
            border-radius: 4px;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
            font-size: 0.9em;
            color: #333; /* Color de texto oscuro, buen contraste */
        }
        pre {
            background-color: #e9ecef; /* Fondo gris claro */
            padding: 15px;
            border: 1px solid #ddd; /* Borde ligero añadido */
            border-radius: 5px;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: #333; /* Color de texto base oscuro para el bloque */
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace; /* Asegura fuente monoespaciada */
            font-size: 0.9em; /* Tamaño consistente */
            line-height: 1.5; /* Mejora legibilidad de bloques */
        }
        /* Estilo específico para 'code' DENTRO DE 'pre' */
        pre code {
            background-color: transparent; /* Fondo transparente para heredar de 'pre' */
            padding: 0; /* Sin padding extra */
            border-radius: 0; /* Sin bordes redondeados extra */
            border: none; /* Sin borde extra */
            color: inherit; /* Hereda color de 'pre' (#333) */
            font-size: inherit; /* Hereda tamaño de 'pre' */
        }
        /* --- FIN CSS CORRECTO --- */

        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid transparent;
            border-radius: 4px;
        }
        .alert-info {
            color: #0c5460;
            background-color: #d1ecf1;
            border-color: #bee5eb;
        }
        .alert-warning {
            color: #856404;
            background-color: #fff3cd;
            border-color: #ffeeba;
        }
        .alert-danger {
            color: #721c24;
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }
        a {
            color: #007bff;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .credentials-removed { /* Estilo para mensaje de setup */
            background-color: #e3f2fd;
            border-left: 5px solid #17a2b8;
            padding: 10px 15px;
            margin: 15px 0;
        }
        .footer {
            text-align: center;
            margin-top: 30px;
            font-size: 0.9em;
            color: #6c757d;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Chatbot AI Free Models</h1>

        <p class="alert alert-info">¡Gracias por elegir <b>Chatbot AI Free Models!</b> Este chatbot te permite integrar un asistente virtual personalizable en tu sitio web, utilizando modelos de IA disponibles gratuitamente a través de OpenRouter.ai.</p>

        <h2>Características Principales</h2>
        <ul>
            <li><strong>Fácil Integración:</strong> Añade el chatbot a cualquier sitio web con una sola línea de JavaScript.</li>
            <li><strong>Panel de Administración Seguro:</strong> Una interfaz completa para configurar apariencia, comportamiento, base de conocimiento, API, etc., protegida por inicio de sesión.</li>
            <li><strong>Configuración Guiada:</strong> Creación segura de la cuenta de administrador en el primer acceso.</li>
            <li><strong>Contraseñas Seguras:</strong> Las contraseñas de administrador se almacenan utilizando hashing moderno (no en texto plano).</li>
            <li><strong>Personalizable:</strong> Modifica colores, iconos, título, mensaje de bienvenida.</li>
            <li><strong>Flexible:</strong> Define la base de conocimiento y las reglas de comportamiento del bot.</li>
            <li><strong>Memoria Conversacional:</strong> El bot puede recordar los mensajes anteriores dentro de una sesión.</li>
            <li><strong>Soporte Multilingüe:</strong> La interfaz del panel de administración y de inicio de sesión/configuración es traducible.</li>
            <li><strong>Listo para OpenRouter.ai:</strong> Preconfigurado para usar los modelos de OpenRouter.ai.</li>
        </ul>

        <h2>Instalación Rápida</h2>
        <ol>
            <li>
                <h3>Subir los Archivos</h3>
                <p>Descomprime el archivo y sube la carpeta completa del chatbot (ej. <code>chatbot-x/</code>) a tu servidor web en una ubicación accesible mediante URL.</p>
            </li>
            <li>
                <h3>Permisos de Carpetas y Archivos</h3>
                <p>Asegúrate de que el servidor web tenga permisos de escritura para:</p>
                <ul>
                    <li>La carpeta principal del chatbot (para crear y escribir en el archivo de base de datos <code>db.db</code>).</li>
                    <li>La subcarpeta <code>images/</code> (para subir iconos/logos).</li>
                    <li>La subcarpeta <code>sounds/</code> (para subir el sonido de notificación).</li>
                </ul>
                <p class="alert alert-warning">Verifica que el archivo <code>db.db</code>, una vez creado, también tenga permisos de escritura por parte del proceso del servidor web.</p>
            </li>
            <li>
                <h3>Primer Acceso y Configuración del Admin</h3>
                <p>Abre tu navegador y navega a la página de inicio de sesión: <code>http://tusitio.com/ruta_del_chatbot/login.php</code>.</p>
                <div class="credentials-removed">
                    <p>En el primer acceso, el sistema detectará que no existe un administrador y te presentará un <strong>formulario de registro</strong>.</p>
                    <p>Introduce un <strong>Nombre de Usuario Admin</strong> y una <strong>Contraseña segura</strong> (y confírmala) para crear tu cuenta. Esta cuenta se guardará en la base de datos <code>db.db</code> con la contraseña protegida mediante hash.</p>
                </div>
                <p>Después de crear la cuenta, serás redirigido (o podrás acceder) a la página de inicio de sesión normal.</p>
            </li>
            <li>
                <h3>Acceso al Panel de Admin</h3>
                 <p>Una vez creada la cuenta, accede a <code>http://tusitio.com/ruta_del_chatbot/login.php</code> usando las credenciales que acabas de definir.</p>
                 <p>Después de iniciar sesión, serás redirigido al Panel de Control (<code>admin.php</code>).</p>
            </li>
            <li>
                <h3>Configuración Inicial</h3>
                <p>Dentro del Panel de Control:</p>
                <ul>
                    <li>Ve a la pestaña <strong>Configuración</strong>.</li>
                    <li>Introduce tu <strong>Clave API</strong> de <a href="https://openrouter.ai/" target="_blank" rel="noopener">OpenRouter.ai</a>.</li>
                    <li>Selecciona un <strong>Modelo IA</strong> (hay muchos modelos gratuitos disponibles).</li>
                    <li>Personaliza la <strong>Base de Conocimiento</strong> y las <strong>Reglas de Comportamiento</strong>. Consulta la <strong>Pestaña Ayuda</strong> en el panel para plantillas y sugerencias.</li>
                    <li>Explora las otras pestañas (Estilo, Imágenes, Sonidos) para personalizar aún más.</li>
                    <li>Selecciona el <strong>Idioma de la Interfaz</strong> deseado.</li>
                </ul>
            </li>
            <li>
                <h3>Integra en Tu Sitio</h3>
                <p>Copia la línea de script proporcionada en la <strong>Pestaña Ayuda</strong> del panel de admin. Debería ser similar a:</p>
                <pre><code>&lt;script src="/ruta_del_chatbot/embed.js" defer>&lt;/script&gt;</code></pre>
                <p>Pega esta línea en las páginas de tu sitio web donde quieras que aparezca el chatbot, preferiblemente antes de la etiqueta de cierre <code>&lt;/body&gt;</code>. Asegúrate de que la ruta al script <code>embed.js</code> sea correcta.</p>
            </li>
        </ol>

        <h2>Estructura de Archivos (Principales)</h2>
        <ul>
            <li><code>admin.php</code>: El panel de administración.</li>
            <li><code>chatbot.php</code>: Gestiona la lógica y la interfaz del chatbot.</li>
            <li><code>embed.js</code>: Script para la integración en el sitio web.</li>
            <li><code>style.css</code>: Hojas de estilo.</li>
            <li><code>admin.js</code> & <code>chatbot.js</code>: Archivos JavaScript.</li>
            <li><code>login.php</code>: Página de inicio de sesión y configuración inicial.</li>
            <li><code>export.php</code>: Exportación de mensajes.</li>
            <li><code>db_init.php</code>: Script de inicialización de la base de datos.</li>
            <li><code>db.db</code>: Base de datos SQLite (creada en el primer inicio).</li>
            <li><code>/images/</code>: Carpeta de imágenes.</li>
            <li><code>/sounds/</code>: Carpeta de sonidos.</li>
            <li><code>/languages/</code>: Carpeta de traducciones.</li>
            <li><code>guia_instalacion.html</code>: Este archivo de guía (nombre sugerido).</li>
        </ul>

        <h2>Seguridad</h2>
        <ul>
            <li><strong>Hashing de Contraseñas:</strong> Las contraseñas ahora se almacenan de forma segura mediante hashing.</li>
            <li><strong>Protección de Directorios:</strong> Considera siempre proteger archivos específicos como <code>admin.php</code> con métodos adicionales (ej. <code>.htaccess</code> en servidores Apache) si deseas un nivel superior de seguridad, limitando el acceso solo a ciertas IP o requiriendo una autenticación HTTP adicional. El acceso directo a la base de datos ya debería estar protegido por el archivo .htaccess proporcionado.</li>
            <li><strong>Permisos de Archivos:</strong> Establece los permisos al mínimo necesario para el funcionamiento, garantizando permisos de escritura solo donde sea necesario (carpeta principal para <code>db.db</code>, <code>images/</code>, <code>sounds/</code>).</li>
        </ul>

        <h2>Solución de Problemas</h2>
        <p>Consulta la sección "Solución de Problemas Comunes" en la <strong>Pestaña Ayuda</strong> del panel de administración.</p>
         <ul>
            <li><strong>Error de BD en el primer acceso a <code>login.php</code>:</strong> Asegúrate de que la carpeta del plugin tenga permisos de escritura por parte del servidor web para permitir la creación del archivo <code>db.db</code>.</li>
            <li>Otros problemas: revisa los logs de error PHP de tu servidor.</li>
         </ul>

        <h2>Contribuciones y Soporte</h2>
        <p>Para soporte o para contribuir al proyecto, visita <a href="https://newcodebyte.altervista.org" target="_blank" rel="noopener">https://newcodebyte.altervista.org</a>.</p>

        <div class="footer">
            <p>¡Gracias por elegir <b>Chatbot AI Free Models!</b></p>
        </div>
    </div>
</body>
</html>